const _0x2b7817=_0x1822;(function(_0x1c4330,_0x36456e){const _0x1a7010=_0x1822,_0x53ef94=_0x1c4330();while(!![]){try{const _0x9f59bf=parseInt(_0x1a7010(0xd7))/0x1+-parseInt(_0x1a7010(0xc8))/0x2+parseInt(_0x1a7010(0x17a))/0x3*(parseInt(_0x1a7010(0xcf))/0x4)+parseInt(_0x1a7010(0xbd))/0x5+-parseInt(_0x1a7010(0x172))/0x6+parseInt(_0x1a7010(0x197))/0x7+parseInt(_0x1a7010(0xbf))/0x8;if(_0x9f59bf===_0x36456e)break;else _0x53ef94['push'](_0x53ef94['shift']());}catch(_0x4d52a6){_0x53ef94['push'](_0x53ef94['shift']());}}}(_0x7e92,0x90fa2));const firebaseConfig={'apiKey':_0x2b7817(0x104),'authDomain':_0x2b7817(0xab),'projectId':_0x2b7817(0xe4),'storageBucket':'whisperwalldemo.firebasestorage.app','messagingSenderId':_0x2b7817(0x17b),'appId':'1:743228341123:web:1cd60340f5d6a2940ad4b6','measurementId':_0x2b7817(0x114),'databaseURL':_0x2b7817(0x127)};firebase[_0x2b7817(0x16e)](firebaseConfig);function _0x7e92(){const _0x582577=['init','updateMessageTimers','Username\x20must\x20be\x20at\x20least\x203\x20characters','ref','https://whisperwalldemo-default-rtdb.firebaseio.com','update','matchMedia','Username\x20registered\x20successfully!','parse','focus','#2ecc71','style','entries',',\x2070%,\x2065%)','log','wallpaperIndex','whisper-doodles3.png','textContent','bombo','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22reaction-count\x22>','maintainScrollPosition','Error\x20loading\x20reactions:','test','Please\x20register\x20to\x20react\x20to\x20messages','admin','whisper-doodles2.png','\x20are\x20typing','\x20and\x20others\x20are\x20typing','rgba(174,\x20214,\x20241,\x200.1)','visible','className','typingUsers','setupReactionPicker','value','setAttribute','\x200%,\x20transparent\x2025%),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20url(\x27','bastard','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-comment-slash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>No\x20messages\x20yet.\x20Be\x20the\x20first\x20to\x20post!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','whisper-doodles.png','quill','children','reduce','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22relative-time\x22\x20data-timestamp=\x22','now','setItem','Message\x20contains\x20inappropriate\x20content','rgba(67,\x2046,\x20118,\x200.1)','zIndex','1000','appendChild','join','showNotification','Error:\x20','displayUsername','disabled','typingTimeoutRef','Username\x20already\x20taken','Please\x20enter\x20a\x20message','add','toLowerCase','retard','#e74c3c','cock','createReactionElement','key','keys','classList','charAt','themeToggle','fas\x20fa-check-circle','database','<span\x20class=\x22user-badge\x20badge-vip\x22><i\x20class=\x22fas\x20fa-star\x22></i>\x20VIP</span>','reaction-emoji','usernameCharCount','val','initializeApp','background','sendButton','target','5420448gwJOvn','querySelector','onlineRef','messagesRef','notificationText','editorToolbar','message-','\x20and\x20','3zAbteQ','743228341123','vip','chatScreen','createMessageElement','fuck','debounce','left','toLocaleTimeString','text-change','\x20show','setupEventListeners','.empty-state','currentWallpaper','renderMessagesSnapshot','register','lastMessageTimestamp','getRelativeTime','message','Please\x20enter\x20a\x20username','refreshButton','h\x20ago','success','innerHTML','registerScreen','catch','initThemeToggle','warn','userRoles','1986929xQbyAc','whisper-doodles7.png','filter','root','bitch','message-highlight','includes','sort','contains','isTyping','getUserBadge','toString','Error\x20loading\x20user\x20roles:','whisper-doodles4.png','<div\x20class=\x22add-reaction-btn\x22\x20data-message-id=\x22','handleTypingIndicator','fas\x20fa-exclamation-circle','updateOnlineUsers','querySelectorAll','uid','notification','douche','role','none','sendMessage','matches','containsProfanity','split','typing/','stopPropagation','\x27)\x0a\x20\x20\x20\x20\x20\x20\x20\x20','fa-times','whisper-doodles11.png','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Refresh','trim','length','changeWallpaper','color','showChat','onlineCount','messageCharCount','data-timestamp','Authentication\x20error:\x20','documentElement','\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22reactions-container\x22\x20id=\x22reactions-','(prefers-color-scheme:\x20dark)','set','charCodeAt','messages','Authentication\x20not\x20ready.\x20Try\x20again.','Error\x20loading\x20messages:\x20','keypress','then','username','timerInterval','setupScrollTracking','What\x27s\x20your\x20secret?','rgba(39,\x2060,\x20117,\x200.1)','body','light','off','Username\x20contains\x20inappropriate\x20content','.relative-time','block','Please\x20register\x20a\x20username\x20first','whisperwalldemo.firebaseapp.com','fa-plus','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22reaction-emoji\x22>','addEventListener','Wallpaper\x20changed!','\x20reacted\x20with\x20','whisper-doodles9.png','getItem','isScrolledToBottom','messageEditor','users/','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','typing','Enter','bombom','fag','typingIndicator','change','1295625dmznKu','setupTypingListener','7978760kGQDJd','reactions-','remove','pussy','rgba(167,\x20139,\x20250,\x200.1)','exists','toggle','initUsernameInput','theme','1206188owiikr','m\x20ago','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','typingRef','reactions/','d\x20ago','setupMessageListener','1035584GMyiia','display','toUpperCase','createElement','notification\x20','\x20is\x20typing','<span\x20class=\x22user-badge\x20badge-new\x22><i\x20class=\x22fas\x20fa-seedling\x22></i>\x20New</span>','signInAnonymously','301115AgeavT','getBoundingClientRect','\x22\x20title=\x22Add\x20reaction\x22>+</div>','data-theme','getAttribute','snow','getElementById','input','online/','getText','hsl(','registerButton','top','whisperwalldemo','wallpaperVariants','beforeunload','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','data-message-id','formatToggle','removeAttribute','innerHeight','users','unknown','currentUser','addReaction','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-username\x22>','.add-reaction-btn','orderByChild','loadReactions','availableReactions','setText','reaction\x20','whisper-doodles13.png','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Sending...','once','system','dark','title','onDisconnect','div','applyWallpaper','users_by_uid\x20lookup\x20failed','setupReactionListener','highlightNewMessages','scroll','AIzaSyBaKWaW1qgVxMNeCd1wdWm_o9vR81j7T1w','add-reaction-btn','timestamp','Editor\x20not\x20ready','click','removeEventListener','userAvatar','showReactionPicker','floor','wallpaperBtn','show','whisper-doodles8.png','Init\x20error:','loadMessages','Username\x20input\x20not\x20found','reactions','G-SJ3504X1T0','new','whisper-doodles5.png','numChildren','forEach','scrollTop','clear','online','Failed\x20to\x20add\x20reaction','push','error','reactionsRef','Message\x20sent!','whisper-doodles10.png','expanded'];_0x7e92=function(){return _0x582577;};return _0x7e92();}const db=firebase[_0x2b7817(0x169)](),auth=firebase['auth'](),AppState={'currentUser':null,'onlineRef':null,'messagesRef':null,'reactionsRef':null,'typingRef':null,'typingTimeoutRef':null,'quill':null,'userRoles':{},'availableReactions':['👍','💜','😂','😮','👎','🔥'],'isTyping':![],'typingUsers':{},'messageListeners':[],'lastMessageTimestamp':0x0,'isScrolledToBottom':!![],'wallpaperVariants':[_0x2b7817(0x149),_0x2b7817(0x13c),_0x2b7817(0x133),_0x2b7817(0x1a4),_0x2b7817(0x116),'whisper-doodles6.png',_0x2b7817(0x198),_0x2b7817(0x10f),_0x2b7817(0xb1),_0x2b7817(0x121),_0x2b7817(0x8a),'whisper-doodles12.png',_0x2b7817(0xf7),'whisper-doodles14.png'],'currentWallpaper':0x0,'timerInterval':null},DOM={'themeToggle':document[_0x2b7817(0xdd)](_0x2b7817(0x167)),'onlineCount':document[_0x2b7817(0xdd)](_0x2b7817(0x91)),'messages':document[_0x2b7817(0xdd)]('messages'),'username':document[_0x2b7817(0xdd)](_0x2b7817(0x9f)),'usernameCharCount':document['getElementById'](_0x2b7817(0x16c)),'registerButton':document[_0x2b7817(0xdd)](_0x2b7817(0xe2)),'displayUsername':document[_0x2b7817(0xdd)](_0x2b7817(0x158)),'userAvatar':document[_0x2b7817(0xdd)](_0x2b7817(0x10a)),'registerScreen':document[_0x2b7817(0xdd)](_0x2b7817(0x192)),'chatScreen':document[_0x2b7817(0xdd)](_0x2b7817(0x17d)),'sendButton':document[_0x2b7817(0xdd)]('sendButton'),'messageCharCount':document[_0x2b7817(0xdd)](_0x2b7817(0x92)),'refreshButton':document[_0x2b7817(0xdd)]('refreshButton'),'notification':document[_0x2b7817(0xdd)](_0x2b7817(0x1ab)),'notificationText':document[_0x2b7817(0xdd)](_0x2b7817(0x176)),'typingIndicator':document['getElementById'](_0x2b7817(0xbb)),'typingUsers':document['getElementById'](_0x2b7817(0x142)),'wallpaperBtn':document[_0x2b7817(0xdd)](_0x2b7817(0x10d)),'formatToggle':document[_0x2b7817(0xdd)](_0x2b7817(0xe9)),'messageEditor':document[_0x2b7817(0xdd)](_0x2b7817(0xb4)),'editorToolbar':document['getElementById'](_0x2b7817(0x177))},Utils={'getRelativeTime'(_0x355a8f,_0x1cbf07=Date['now']()){const _0x510924=_0x2b7817,_0x57cb5b=_0x1cbf07-_0x355a8f,_0xe3eb88=Math[_0x510924(0x10c)](_0x57cb5b/0x3e8),_0x24c0d3=Math['floor'](_0xe3eb88/0x3c),_0x3e9cc8=Math['floor'](_0x24c0d3/0x3c),_0x31b699=Math[_0x510924(0x10c)](_0x3e9cc8/0x18);if(_0x31b699>0x0)return _0x31b699+_0x510924(0xcd);if(_0x3e9cc8>0x0)return _0x3e9cc8+_0x510924(0x18f);if(_0x24c0d3>0x0)return _0x24c0d3+_0x510924(0xc9);return'Just\x20now';},'containsProfanity'(_0x14e687){const _0x3ba3cd=_0x2b7817;if(!_0x14e687)return![];const _0x33979b=[_0x3ba3cd(0x17f),'asshole',_0x3ba3cd(0x19b),_0x3ba3cd(0xba),_0x3ba3cd(0x15f),'whore','slut',_0x3ba3cd(0xc2),_0x3ba3cd(0x161),_0x3ba3cd(0x147),_0x3ba3cd(0x1ac),_0x3ba3cd(0x135),_0x3ba3cd(0xb9)],_0x110de2=_0x14e687[_0x3ba3cd(0x15e)]();return _0x33979b['some'](_0x56d41e=>{const _0x16162f=_0x3ba3cd,_0x24777b=new RegExp('\x5cb'+_0x56d41e+'\x5cb','i');return _0x24777b[_0x16162f(0x139)](_0x110de2);});},'filterOldMessages'(_0x4c02f6){const _0x31faf5=_0x2b7817,_0x2df425=3.5*0x18*0x3c*0x3c*0x3e8,_0x312828=Date[_0x31faf5(0x14e)]();return _0x4c02f6['filter'](_0x4fb880=>{const _0x529514=_0x31faf5;return _0x312828-_0x4fb880[_0x529514(0x106)]<_0x2df425;});},'getUserBadge'(_0xfdbad,_0x15c1ab){const _0x4bcd35=_0x2b7817;if(!_0xfdbad)return'';if(_0x15c1ab[_0xfdbad]==='admin')return'<span\x20class=\x22user-badge\x20badge-admin\x22><i\x20class=\x22fas\x20fa-shield-alt\x22></i>\x20Admin</span>';else{if(_0x15c1ab[_0xfdbad]===_0x4bcd35(0x17c))return _0x4bcd35(0x16a);else{if(_0x15c1ab[_0xfdbad]===_0x4bcd35(0x115))return _0x4bcd35(0xd5);}}return'';},'debounce'(_0x323861,_0x229015){let _0x57d6e6;return function _0x4d665c(..._0x113fd4){const _0x4bdcd9=()=>{clearTimeout(_0x57d6e6),_0x323861(..._0x113fd4);};clearTimeout(_0x57d6e6),_0x57d6e6=setTimeout(_0x4bdcd9,_0x229015);};}},UIManager={'showNotification'(_0x891132,_0xa7f072=!![],_0x51f42c=0xbb8){const _0x51eaf6=_0x2b7817;if(!DOM[_0x51eaf6(0x1ab)]||!DOM['notificationText']){console[_0xa7f072?_0x51eaf6(0x131):_0x51eaf6(0x11e)](_0x891132);return;}DOM[_0x51eaf6(0x176)]['textContent']=_0x891132,DOM[_0x51eaf6(0x1ab)]['className']=_0x51eaf6(0xd3)+(_0xa7f072?_0x51eaf6(0x190):_0x51eaf6(0x11e))+_0x51eaf6(0x184);const _0x20533b=DOM[_0x51eaf6(0x1ab)][_0x51eaf6(0x173)]('i');_0x20533b&&(_0x20533b['className']=_0xa7f072?_0x51eaf6(0x168):_0x51eaf6(0x1a7)),setTimeout(()=>{const _0x36ce42=_0x51eaf6;DOM[_0x36ce42(0x1ab)][_0x36ce42(0x165)][_0x36ce42(0xc1)](_0x36ce42(0x10e));},_0x51f42c);},'updateMessageTimers'(){const _0xfba890=_0x2b7817,_0xf289bc=document[_0xfba890(0x1a9)](_0xfba890(0xa8)),_0x19ff2e=Date[_0xfba890(0x14e)]();_0xf289bc[_0xfba890(0x118)](_0x4327e3=>{const _0x494f7d=_0xfba890,_0x55615b=parseInt(_0x4327e3[_0x494f7d(0xdb)](_0x494f7d(0x93)));!isNaN(_0x55615b)&&(_0x4327e3[_0x494f7d(0x134)]=Utils[_0x494f7d(0x18b)](_0x55615b,_0x19ff2e));});},'applyWallpaper'(){const _0x2a5a69=_0x2b7817,_0x5e6973=AppState[_0x2a5a69(0xe5)][AppState['currentWallpaper']],_0x232186=document[_0x2a5a69(0x95)][_0x2a5a69(0xdb)](_0x2a5a69(0xda))===_0x2a5a69(0xfb);document[_0x2a5a69(0xa4)][_0x2a5a69(0x12e)][_0x2a5a69(0x16f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20radial-gradient(circle\x20at\x2015%\x2050%,\x20'+(_0x232186?_0x2a5a69(0xa3):_0x2a5a69(0x13f))+'\x200%,\x20transparent\x2025%),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20radial-gradient(circle\x20at\x2085%\x2030%,\x20'+(_0x232186?_0x2a5a69(0x151):_0x2a5a69(0xc3))+_0x2a5a69(0x146)+_0x5e6973+_0x2a5a69(0x1b5);},'changeWallpaper'(){const _0x4417bf=_0x2b7817;AppState[_0x4417bf(0x187)]=(AppState['currentWallpaper']+0x1)%AppState[_0x4417bf(0xe5)][_0x4417bf(0x8d)],this[_0x4417bf(0xff)](),localStorage[_0x4417bf(0x14f)](_0x4417bf(0x132),AppState[_0x4417bf(0x187)]),UIManager[_0x4417bf(0x156)](_0x4417bf(0xaf),!![],0x7d0);},'highlightNewMessages'(){const _0x303ad6=_0x2b7817,_0x520a25=document[_0x303ad6(0x1a9)]('.message.new');_0x520a25[_0x303ad6(0x118)](_0x2beb0a=>{const _0xc21b9a=_0x303ad6;_0x2beb0a['classList'][_0xc21b9a(0x15d)](_0xc21b9a(0x19c)),setTimeout(()=>{const _0x3f6f47=_0xc21b9a;_0x2beb0a['classList'][_0x3f6f47(0xc1)](_0x3f6f47(0x115)),_0x2beb0a[_0x3f6f47(0x165)][_0x3f6f47(0xc1)](_0x3f6f47(0x19c));},0x7d0);});},'maintainScrollPosition'(){const _0x5827e5=_0x2b7817;AppState['isScrolledToBottom']&&DOM[_0x5827e5(0x9a)]&&setTimeout(()=>{const _0x4e3336=_0x5827e5;DOM[_0x4e3336(0x9a)][_0x4e3336(0x119)]=DOM['messages']['scrollHeight'];},0x64);},'createMessageElement'(_0x192f19){const _0x9bc6a3=_0x2b7817,_0x456c87=document['createElement'](_0x9bc6a3(0xfe));_0x456c87[_0x9bc6a3(0x141)]=_0x9bc6a3(0x18c),_0x456c87['id']=_0x9bc6a3(0x178)+_0x192f19['id'];AppState['currentUser']&&_0x192f19[_0x9bc6a3(0x9f)]===AppState[_0x9bc6a3(0xee)]&&_0x456c87[_0x9bc6a3(0x165)][_0x9bc6a3(0x15d)]('own-message');_0x192f19['timestamp']>AppState[_0x9bc6a3(0x18a)]&&_0x456c87[_0x9bc6a3(0x165)][_0x9bc6a3(0x15d)](_0x9bc6a3(0x115));const _0xc6ff6b=_0x192f19[_0x9bc6a3(0x106)]?new Date(_0x192f19[_0x9bc6a3(0x106)])[_0x9bc6a3(0x182)]():'';return _0x456c87[_0x9bc6a3(0x191)]=_0x9bc6a3(0xf0)+(_0x192f19['username']||_0x9bc6a3(0xed))+'\x20'+Utils[_0x9bc6a3(0x1a1)](_0x192f19[_0x9bc6a3(0x9f)],AppState[_0x9bc6a3(0x196)])+_0x9bc6a3(0xb6)+(_0x192f19['message']||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22absolute-time\x22>'+_0xc6ff6b+_0x9bc6a3(0x14d)+_0x192f19[_0x9bc6a3(0x106)]+_0x9bc6a3(0x96)+_0x192f19['id']+'\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x456c87;},'renderMessagesSnapshot'(_0x1bbaf8){const _0x573c60=_0x2b7817;if(!DOM[_0x573c60(0x9a)])return;DOM['refreshButton']&&(DOM[_0x573c60(0x18e)][_0x573c60(0x159)]=![],DOM[_0x573c60(0x18e)][_0x573c60(0x191)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Refresh');if(!_0x1bbaf8['exists']()){DOM[_0x573c60(0x9a)][_0x573c60(0x191)]=_0x573c60(0x148);return;}const _0x12271d=[];_0x1bbaf8[_0x573c60(0x118)](_0x4b41eb=>{const _0x1f6c2d=_0x573c60;_0x12271d['push']({'id':_0x4b41eb['key'],..._0x4b41eb[_0x1f6c2d(0x16d)]()});});const _0x266f75=Utils['filterOldMessages'](_0x12271d);_0x266f75[_0x573c60(0x19e)]((_0x95a62e,_0x2ac316)=>(_0x95a62e[_0x573c60(0x106)]||0x0)-(_0x2ac316['timestamp']||0x0));const _0x2a9024=_0x266f75[_0x573c60(0x8d)]>0x0?_0x266f75[_0x266f75[_0x573c60(0x8d)]-0x1][_0x573c60(0x106)]:0x0;if(_0x2a9024>AppState['lastMessageTimestamp']&&DOM[_0x573c60(0x9a)][_0x573c60(0x14b)]['length']>0x0&&!DOM[_0x573c60(0x9a)][_0x573c60(0x173)](_0x573c60(0x186))){const _0x30145a=_0x266f75[_0x573c60(0x199)](_0x483a55=>_0x483a55[_0x573c60(0x106)]>AppState['lastMessageTimestamp']);_0x30145a[_0x573c60(0x118)](_0x369e69=>{const _0x4c4963=_0x573c60,_0x40b3fc=this[_0x4c4963(0x17e)](_0x369e69);DOM['messages'][_0x4c4963(0x154)](_0x40b3fc);const _0xb4209d=document[_0x4c4963(0xdd)]('reactions-'+_0x369e69['id']);if(_0xb4209d)ReactionManager['loadReactions'](_0x369e69['id'],_0xb4209d);}),this[_0x573c60(0x102)]();}else DOM[_0x573c60(0x9a)][_0x573c60(0x191)]='',_0x266f75[_0x573c60(0x118)](_0xfad699=>{const _0x1afb0e=_0x573c60,_0x539f75=this[_0x1afb0e(0x17e)](_0xfad699);DOM[_0x1afb0e(0x9a)][_0x1afb0e(0x154)](_0x539f75);const _0x4f0eab=document['getElementById'](_0x1afb0e(0xc0)+_0xfad699['id']);if(_0x4f0eab)ReactionManager['loadReactions'](_0xfad699['id'],_0x4f0eab);});this[_0x573c60(0x124)](),AppState[_0x573c60(0x18a)]=_0x2a9024,this[_0x573c60(0x137)]();}},AuthManager={async 'register'(){const _0x23f2a4=_0x2b7817;if(!DOM['username']){UIManager[_0x23f2a4(0x156)](_0x23f2a4(0x112),![]);return;}let _0x5ae586=DOM[_0x23f2a4(0x9f)][_0x23f2a4(0x144)][_0x23f2a4(0x8c)]();if(!_0x5ae586){UIManager[_0x23f2a4(0x156)](_0x23f2a4(0x18d),![]);return;}if(_0x5ae586[_0x23f2a4(0x8d)]<0x3){UIManager['showNotification'](_0x23f2a4(0x125),![]);return;}if(Utils[_0x23f2a4(0x1b1)](_0x5ae586)){UIManager[_0x23f2a4(0x156)](_0x23f2a4(0xa7),![]);return;}if(!/^[a-zA-Z0-9_]+$/['test'](_0x5ae586)){UIManager['showNotification']('Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20and\x20underscores',![]);return;}_0x5ae586=_0x5ae586['replace'](/\s+/g,'_');const _0x185f24=auth[_0x23f2a4(0xee)];if(!_0x185f24){UIManager[_0x23f2a4(0x156)](_0x23f2a4(0x9b),![]);return;}const _0x4b5a3e=_0x185f24['uid'],_0x1b9d68=DOM[_0x23f2a4(0xe2)]?DOM[_0x23f2a4(0xe2)][_0x23f2a4(0x191)]:null;DOM['registerButton']&&(DOM[_0x23f2a4(0xe2)][_0x23f2a4(0x191)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Registering...',DOM[_0x23f2a4(0xe2)][_0x23f2a4(0x159)]=!![]);try{const _0x321370=await db['ref'](_0x23f2a4(0xb5)+_0x5ae586)[_0x23f2a4(0xf9)](_0x23f2a4(0x144));if(_0x321370[_0x23f2a4(0xc4)]()){UIManager['showNotification'](_0x23f2a4(0x15b),![]);DOM['registerButton']&&(DOM[_0x23f2a4(0xe2)][_0x23f2a4(0x191)]=_0x1b9d68,DOM['registerButton'][_0x23f2a4(0x159)]=![]);return;}let _0xea7aaf=_0x23f2a4(0x115);if(_0x5ae586[_0x23f2a4(0x15e)]()[_0x23f2a4(0x19d)](_0x23f2a4(0x13b)))_0xea7aaf=_0x23f2a4(0x13b);else{if(_0x5ae586['toLowerCase']()[_0x23f2a4(0x19d)](_0x23f2a4(0x17c)))_0xea7aaf='vip';else{if(_0x5ae586[_0x23f2a4(0x15e)]()===_0x23f2a4(0xfa))_0xea7aaf='system';}}AppState['userRoles'][_0x5ae586]=_0xea7aaf;const _0x32feb3={};_0x32feb3[_0x23f2a4(0xb5)+_0x5ae586]={'uid':_0x4b5a3e,'username':_0x5ae586,'registeredAt':Date[_0x23f2a4(0x14e)](),'role':_0xea7aaf,'lastSeen':Date[_0x23f2a4(0x14e)]()},_0x32feb3['users_by_uid/'+_0x4b5a3e]={'username':_0x5ae586,'role':_0xea7aaf},await db[_0x23f2a4(0x126)]()[_0x23f2a4(0x128)](_0x32feb3),localStorage[_0x23f2a4(0x14f)](_0x23f2a4(0x9f),_0x5ae586),AppState[_0x23f2a4(0xee)]=_0x5ae586;DOM['displayUsername']&&(DOM[_0x23f2a4(0x158)][_0x23f2a4(0x191)]=_0x5ae586+Utils[_0x23f2a4(0x1a1)](_0x5ae586,AppState['userRoles']));if(DOM['userAvatar']){DOM[_0x23f2a4(0x10a)][_0x23f2a4(0x134)]=_0x5ae586[_0x23f2a4(0x166)](0x0)[_0x23f2a4(0xd1)]();const _0x3191e4=_0x5ae586[_0x23f2a4(0x1b2)]('')[_0x23f2a4(0x14c)]((_0xbebdb0,_0xbcb9ba)=>_0xbebdb0+_0xbcb9ba['charCodeAt'](0x0),0x0)%0x168;DOM[_0x23f2a4(0x10a)][_0x23f2a4(0x12e)]['backgroundColor']=_0x23f2a4(0xe1)+_0x3191e4+',\x2070%,\x2065%)';}AppState[_0x23f2a4(0x174)]&&(AppState[_0x23f2a4(0x174)][_0x23f2a4(0xc1)](),AppState[_0x23f2a4(0x174)]=null),AppState[_0x23f2a4(0x174)]=db['ref'](_0x23f2a4(0xdf)+_0x5ae586),await AppState[_0x23f2a4(0x174)]['set'](!![]),AppState[_0x23f2a4(0x174)][_0x23f2a4(0xfd)]()[_0x23f2a4(0xc1)](),AppState['typingRef']&&(AppState['typingRef'][_0x23f2a4(0xc1)](),AppState[_0x23f2a4(0xcb)]=null),AppState[_0x23f2a4(0xcb)]=db['ref'](_0x23f2a4(0x1b3)+_0x5ae586),await AppState['typingRef'][_0x23f2a4(0x98)](![]),AppState['typingRef']['onDisconnect']()['remove'](),this['showChat'](),UIManager['showNotification'](_0x23f2a4(0x12a)),MessageManager['loadMessages'](),TypingManager['setupTypingListener']();}catch(_0x2f23bc){UIManager[_0x23f2a4(0x156)](_0x23f2a4(0x157)+(_0x2f23bc[_0x23f2a4(0x18c)]||_0x2f23bc),![]),DOM[_0x23f2a4(0xe2)]&&(DOM[_0x23f2a4(0xe2)][_0x23f2a4(0x191)]=_0x1b9d68,DOM[_0x23f2a4(0xe2)][_0x23f2a4(0x159)]=![]);}},'showChat'(){const _0x1a394f=_0x2b7817;DOM[_0x1a394f(0x192)]&&(DOM['registerScreen'][_0x1a394f(0x12e)][_0x1a394f(0xd0)]=_0x1a394f(0x1ae)),DOM['chatScreen']&&(DOM[_0x1a394f(0x17d)][_0x1a394f(0x12e)][_0x1a394f(0xd0)]=_0x1a394f(0xa9)),AppState['quill']&&setTimeout(()=>AppState[_0x1a394f(0x14a)][_0x1a394f(0x12c)](),0x64);},async 'loadUserRoles'(){const _0x5e9d36=_0x2b7817,_0xbbae63=localStorage[_0x5e9d36(0xb2)]('userRoles'),_0x580ebc=localStorage[_0x5e9d36(0xb2)]('userRolesCacheTime');if(_0xbbae63&&_0x580ebc&&Date[_0x5e9d36(0x14e)]()-parseInt(_0x580ebc)<0x493e0){AppState[_0x5e9d36(0x196)]=JSON[_0x5e9d36(0x12b)](_0xbbae63);return;}try{const _0x55980e=await db[_0x5e9d36(0x126)](_0x5e9d36(0xec))[_0x5e9d36(0xf9)]('value');_0x55980e['exists']()&&(_0x55980e[_0x5e9d36(0x118)](_0x2fb86a=>{const _0xc0866f=_0x5e9d36,_0x8ea596=_0x2fb86a[_0xc0866f(0x16d)]();AppState[_0xc0866f(0x196)][_0x8ea596[_0xc0866f(0x9f)]]=_0x8ea596[_0xc0866f(0x1ad)]||_0xc0866f(0x115);}),localStorage['setItem'](_0x5e9d36(0x196),JSON['stringify'](AppState[_0x5e9d36(0x196)])),localStorage['setItem']('userRolesCacheTime',Date[_0x5e9d36(0x14e)]()[_0x5e9d36(0x1a2)]()));}catch(_0x2526c7){console[_0x5e9d36(0x11e)](_0x5e9d36(0x1a3),_0x2526c7);}}},MessageManager={async 'sendMessage'(){const _0x4383e7=_0x2b7817;if(!AppState['currentUser']){UIManager['showNotification'](_0x4383e7(0xaa),![]);return;}if(!AppState[_0x4383e7(0x14a)]){UIManager[_0x4383e7(0x156)](_0x4383e7(0x107),![]);return;}const _0x236a14=AppState['quill'][_0x4383e7(0x19a)][_0x4383e7(0x191)],_0x242fbe=AppState[_0x4383e7(0x14a)][_0x4383e7(0xe0)]()['trim']();if(!_0x242fbe){UIManager[_0x4383e7(0x156)](_0x4383e7(0x15c),![]);return;}if(_0x242fbe[_0x4383e7(0x8d)]>0x9c4){UIManager['showNotification']('Message\x20is\x20too\x20long\x20(max\x202500\x20characters)',![]);return;}if(Utils['containsProfanity'](_0x242fbe)){UIManager[_0x4383e7(0x156)](_0x4383e7(0x150),![]);return;}const _0x7478b=auth[_0x4383e7(0xee)];if(!_0x7478b){UIManager[_0x4383e7(0x156)]('Not\x20authenticated',![]);return;}const _0x48c41a=_0x7478b[_0x4383e7(0x1aa)],_0x548110=DOM[_0x4383e7(0x170)]?DOM['sendButton'][_0x4383e7(0x191)]:null;DOM[_0x4383e7(0x170)]&&(DOM[_0x4383e7(0x170)][_0x4383e7(0x159)]=!![],DOM[_0x4383e7(0x170)][_0x4383e7(0x191)]=_0x4383e7(0xf8));try{const _0x2ac639=Date[_0x4383e7(0x14e)]();await db['ref'](_0x4383e7(0x9a))[_0x4383e7(0x11d)]({'username':AppState['currentUser'],'uid':_0x48c41a,'message':_0x236a14,'plainText':_0x242fbe,'timestamp':_0x2ac639}),AppState[_0x4383e7(0x14a)][_0x4383e7(0xf5)](''),DOM[_0x4383e7(0x92)]&&(DOM[_0x4383e7(0x92)]['textContent']='0',DOM[_0x4383e7(0x92)][_0x4383e7(0x12e)][_0x4383e7(0x8f)]=''),AppState[_0x4383e7(0xcb)]&&(AppState[_0x4383e7(0xcb)][_0x4383e7(0x98)](![]),AppState[_0x4383e7(0x1a0)]=![]),UIManager[_0x4383e7(0x156)](_0x4383e7(0x120));}catch(_0x70c07b){UIManager[_0x4383e7(0x156)](_0x4383e7(0x157)+(_0x70c07b['message']||_0x70c07b),![]);}finally{DOM[_0x4383e7(0x170)]&&(DOM[_0x4383e7(0x170)][_0x4383e7(0x159)]=![],DOM[_0x4383e7(0x170)][_0x4383e7(0x191)]=_0x548110);}},async 'loadMessages'(){const _0x229cd0=_0x2b7817;DOM[_0x229cd0(0x18e)]&&(DOM[_0x229cd0(0x18e)][_0x229cd0(0x159)]=!![],DOM['refreshButton'][_0x229cd0(0x191)]=_0x229cd0(0xca));try{const _0xdc22f6=await db[_0x229cd0(0x126)](_0x229cd0(0x9a))['orderByChild'](_0x229cd0(0x106))['limitToLast'](0x32)[_0x229cd0(0xf9)](_0x229cd0(0x144));UIManager[_0x229cd0(0x188)](_0xdc22f6);}catch(_0x4fa762){UIManager[_0x229cd0(0x156)](_0x229cd0(0x9c)+(_0x4fa762[_0x229cd0(0x18c)]||_0x4fa762),![]),DOM[_0x229cd0(0x18e)]&&(DOM['refreshButton']['disabled']=![],DOM[_0x229cd0(0x18e)][_0x229cd0(0x191)]=_0x229cd0(0x8b));}},'setupMessageListener'(){const _0xb19292=_0x2b7817;AppState[_0xb19292(0x175)]&&AppState[_0xb19292(0x175)]['off']();let _0x578dd4;AppState[_0xb19292(0x175)]=db[_0xb19292(0x126)](_0xb19292(0x9a))[_0xb19292(0xf2)](_0xb19292(0x106))['limitToLast'](0x32),AppState[_0xb19292(0x175)]['on']('value',_0x50a5df=>{clearTimeout(_0x578dd4),_0x578dd4=setTimeout(()=>{const _0xac3b9=_0x1822;UIManager[_0xac3b9(0x188)](_0x50a5df);},0x64);});}},ReactionManager={'addReaction'(_0xe16915,_0x1decb8){const _0xc695d0=_0x2b7817;if(!AppState[_0xc695d0(0xee)]){UIManager[_0xc695d0(0x156)](_0xc695d0(0x13a),![]);return;}const _0x4805fc=db[_0xc695d0(0x126)](_0xc695d0(0xcc)+_0xe16915+'/'+AppState['currentUser']);_0x4805fc[_0xc695d0(0xf9)]('value')[_0xc695d0(0x9e)](_0x3920af=>{const _0x33a1e9=_0xc695d0;return _0x3920af[_0x33a1e9(0xc4)]()&&_0x3920af[_0x33a1e9(0x16d)]()===_0x1decb8?_0x4805fc[_0x33a1e9(0xc1)]():_0x4805fc[_0x33a1e9(0x98)](_0x1decb8);})[_0xc695d0(0x193)](_0x3624f0=>UIManager[_0xc695d0(0x156)](_0xc695d0(0x11c),![]));},'createReactionElement'(_0x239dbb,_0x3aee43,_0x239c9c,_0xe75682,_0x1495d8){const _0x6d1998=_0x2b7817,_0x14c039=document[_0x6d1998(0xd2)]('div');_0x14c039[_0x6d1998(0x141)]=_0x6d1998(0xf6)+(_0xe75682?'active':''),_0x14c039[_0x6d1998(0x191)]=_0x6d1998(0xad)+_0x3aee43+_0x6d1998(0x136)+_0x239c9c+_0x6d1998(0xe7);if(_0x1495d8&&_0x1495d8['length']>0x0){const _0xb83cc1=document[_0x6d1998(0xd2)](_0x6d1998(0xfe));_0xb83cc1[_0x6d1998(0x141)]='reaction-users',_0xb83cc1['textContent']=_0x1495d8['join'](',\x20'),_0x14c039[_0x6d1998(0x154)](_0xb83cc1),_0x14c039['title']=_0x1495d8[_0x6d1998(0x155)](',\x20')+_0x6d1998(0xb0)+_0x3aee43;}return _0x14c039[_0x6d1998(0xae)](_0x6d1998(0x108),()=>this[_0x6d1998(0xef)](_0x239dbb,_0x3aee43)),_0x14c039;},'showReactionPicker'(_0x32afe0,_0xb8676a){const _0x4f1560=_0x2b7817,_0x1d9099=document[_0x4f1560(0x173)]('.reaction-picker');if(_0x1d9099){_0x1d9099['remove']();return;}const _0x35253c=document['createElement'](_0x4f1560(0xfe));_0x35253c[_0x4f1560(0x141)]='reaction-picker',AppState[_0x4f1560(0xf4)]['forEach'](_0x397c1f=>{const _0x12fe6b=_0x4f1560,_0x54c124=document[_0x12fe6b(0xd2)](_0x12fe6b(0xfe));_0x54c124[_0x12fe6b(0x141)]=_0x12fe6b(0x16b),_0x54c124['textContent']=_0x397c1f,_0x54c124[_0x12fe6b(0xae)](_0x12fe6b(0x108),()=>{const _0xbd300d=_0x12fe6b;this[_0xbd300d(0xef)](_0xb8676a,_0x397c1f),_0x35253c['remove']();}),_0x35253c[_0x12fe6b(0x154)](_0x54c124);});const _0x32da31=_0x32afe0[_0x4f1560(0xd8)](),_0x361467=window[_0x4f1560(0xeb)];let _0x48d769=_0x32da31[_0x4f1560(0xe3)]-0x3c;_0x48d769+0x3c>_0x361467-0x64&&(_0x48d769=_0x361467-0xa0);_0x35253c[_0x4f1560(0x12e)]['position']='fixed',_0x35253c['style'][_0x4f1560(0xe3)]=_0x48d769+'px',_0x35253c[_0x4f1560(0x12e)][_0x4f1560(0x181)]=_0x32da31[_0x4f1560(0x181)]-0x50+'px',_0x35253c[_0x4f1560(0x12e)][_0x4f1560(0x152)]=_0x4f1560(0x153),document[_0x4f1560(0xa4)][_0x4f1560(0x154)](_0x35253c);const _0x3ee1a8=_0x251e49=>{const _0x365888=_0x4f1560;!_0x35253c[_0x365888(0x19f)](_0x251e49[_0x365888(0x171)])&&_0x251e49[_0x365888(0x171)]!==_0x32afe0&&(_0x35253c[_0x365888(0xc1)](),document[_0x365888(0x109)](_0x365888(0x108),_0x3ee1a8));};setTimeout(()=>document['addEventListener'](_0x4f1560(0x108),_0x3ee1a8),0x0);},'setupReactionPicker'(_0x4e9035,_0x1c84e9){const _0x3c14a7=_0x2b7817,_0x48e99d=_0x4e9035[_0x3c14a7(0x173)](_0x3c14a7(0xf1));_0x48e99d&&_0x48e99d[_0x3c14a7(0xae)](_0x3c14a7(0x108),_0x2c3048=>{const _0x1e7946=_0x3c14a7;_0x2c3048['stopPropagation'](),this[_0x1e7946(0x10b)](_0x2c3048[_0x1e7946(0x171)],_0x1c84e9);});},'loadReactions'(_0x423d55,_0x5d938b){const _0xb78b3b=_0x2b7817,_0x36ba8f='reactions/'+_0x423d55;db[_0xb78b3b(0x126)](_0x36ba8f)['once'](_0xb78b3b(0x144))['then'](_0x1e48b4=>{const _0x1cab20=_0xb78b3b;if(!_0x5d938b)return;if(!_0x1e48b4[_0x1cab20(0xc4)]()){_0x5d938b[_0x1cab20(0x191)]=_0x1cab20(0x1a5)+_0x423d55+_0x1cab20(0xd9),this[_0x1cab20(0x143)](_0x5d938b,_0x423d55);return;}const _0x16772a=_0x1e48b4['val']()||{},_0x101ea8={},_0x467730={},_0x43c27b={};Object[_0x1cab20(0x164)](_0x16772a)[_0x1cab20(0x118)](_0x328648=>{const _0x434ea0=_0x1cab20,_0x981839=_0x16772a[_0x328648];_0x101ea8[_0x981839]=(_0x101ea8[_0x981839]||0x0)+0x1;if(_0x328648===AppState[_0x434ea0(0xee)])_0x467730[_0x981839]=!![];!_0x43c27b[_0x981839]&&(_0x43c27b[_0x981839]=[]),_0x43c27b[_0x981839][_0x434ea0(0x11d)](_0x328648);}),_0x5d938b['innerHTML']='',Object[_0x1cab20(0x12f)](_0x101ea8)[_0x1cab20(0x19e)]((_0x5e3a81,_0x596eb4)=>_0x596eb4[0x1]-_0x5e3a81[0x1])[_0x1cab20(0x118)](([_0x53f8d4,_0x544254])=>{const _0x120343=_0x1cab20,_0x5e1038=!!_0x467730[_0x53f8d4],_0x27e0c3=_0x43c27b[_0x53f8d4]||[],_0x4eb120=this[_0x120343(0x162)](_0x423d55,_0x53f8d4,_0x544254,_0x5e1038,_0x27e0c3);_0x5d938b[_0x120343(0x154)](_0x4eb120);});const _0x5ac088=document[_0x1cab20(0xd2)](_0x1cab20(0xfe));_0x5ac088[_0x1cab20(0x141)]=_0x1cab20(0x105),_0x5ac088[_0x1cab20(0x191)]='+',_0x5ac088['setAttribute'](_0x1cab20(0xe8),_0x423d55),_0x5ac088[_0x1cab20(0xfc)]='Add\x20reaction',_0x5ac088[_0x1cab20(0xae)](_0x1cab20(0x108),_0x1aa1b6=>{const _0x3ea9cd=_0x1cab20;_0x1aa1b6[_0x3ea9cd(0x1b4)](),this['showReactionPicker'](_0x1aa1b6[_0x3ea9cd(0x171)],_0x423d55);}),_0x5d938b[_0x1cab20(0x154)](_0x5ac088);})[_0xb78b3b(0x193)](_0x210dcc=>{const _0x4053c0=_0xb78b3b;console[_0x4053c0(0x11e)](_0x4053c0(0x138),_0x210dcc);});},'setupReactionListener'(){const _0x14f931=_0x2b7817;AppState[_0x14f931(0x11f)]&&AppState[_0x14f931(0x11f)]['off']();AppState[_0x14f931(0x11f)]=db['ref'](_0x14f931(0x113));const _0x5aa117=new Set();let _0xfe8ef5=null;const _0x3dd712=()=>{const _0x27f9cd=_0x14f931;_0x5aa117[_0x27f9cd(0x118)](_0x52d393=>{const _0x3eab80=_0x27f9cd,_0x2643ce=document[_0x3eab80(0xdd)](_0x3eab80(0xc0)+_0x52d393);_0x2643ce&&this[_0x3eab80(0xf3)](_0x52d393,_0x2643ce);}),_0x5aa117[_0x27f9cd(0x11a)](),_0xfe8ef5=null;};AppState[_0x14f931(0x11f)]['on'](_0x14f931(0x144),_0x48f52f=>{const _0x570da0=_0x14f931;if(!_0x48f52f['exists']())return;_0x48f52f[_0x570da0(0x118)](_0x498c65=>{const _0x32c462=_0x570da0;_0x5aa117[_0x32c462(0x15d)](_0x498c65['key']);}),_0xfe8ef5&&clearTimeout(_0xfe8ef5),_0xfe8ef5=setTimeout(_0x3dd712,0x64);},_0xbaaa82=>{const _0x1a839e=_0x14f931;console[_0x1a839e(0x11e)]('Reaction\x20listener\x20error:',_0xbaaa82),UIManager[_0x1a839e(0x156)]('Error\x20updating\x20reactions',![]);});}},TypingManager={'handleTypingIndicator':Utils[_0x2b7817(0x180)](function(_0xaea47a){const _0x9a58e0=_0x2b7817;if(!AppState[_0x9a58e0(0xee)]||!AppState[_0x9a58e0(0xcb)])return;const _0xa045f=_0xaea47a[_0x9a58e0(0x8d)]>0x0;_0xa045f!==AppState['isTyping']&&(AppState[_0x9a58e0(0x1a0)]=_0xa045f,AppState[_0x9a58e0(0xcb)]['set'](_0xa045f),AppState[_0x9a58e0(0x15a)]&&clearTimeout(AppState['typingTimeoutRef']),_0xa045f&&(AppState[_0x9a58e0(0x15a)]=setTimeout(()=>{const _0x427710=_0x9a58e0;AppState[_0x427710(0x1a0)]=![],AppState[_0x427710(0xcb)][_0x427710(0x98)](![]);},0xbb8)));},0x12c),'setupTypingListener'(){const _0x253486=_0x2b7817;AppState[_0x253486(0xcb)]&&AppState[_0x253486(0xcb)][_0x253486(0xa6)](),db[_0x253486(0x126)](_0x253486(0xb7))['on']('value',_0x3845c6=>{const _0x5351bb=_0x253486;if(!_0x3845c6[_0x5351bb(0xc4)]()){DOM[_0x5351bb(0xbb)][_0x5351bb(0x12e)][_0x5351bb(0xd0)]=_0x5351bb(0x1ae);return;}const _0x17d042=_0x3845c6[_0x5351bb(0x16d)](),_0x3f0581=[];Object[_0x5351bb(0x164)](_0x17d042)['forEach'](_0x31ec8d=>{const _0x1be54f=_0x5351bb;_0x31ec8d!==AppState['currentUser']&&_0x17d042[_0x31ec8d]===!![]&&_0x3f0581[_0x1be54f(0x11d)](_0x31ec8d);});if(_0x3f0581[_0x5351bb(0x8d)]>0x0){let _0x5e444d='';if(_0x3f0581[_0x5351bb(0x8d)]===0x1)_0x5e444d=_0x3f0581[0x0]+_0x5351bb(0xd4);else _0x3f0581[_0x5351bb(0x8d)]===0x2?_0x5e444d=_0x3f0581[0x0]+_0x5351bb(0x179)+_0x3f0581[0x1]+_0x5351bb(0x13d):_0x5e444d=_0x3f0581[0x0]+',\x20'+_0x3f0581[0x1]+_0x5351bb(0x13e);DOM[_0x5351bb(0x142)][_0x5351bb(0x134)]=_0x5e444d,DOM[_0x5351bb(0xbb)]['style'][_0x5351bb(0xd0)]='flex';}else DOM[_0x5351bb(0xbb)][_0x5351bb(0x12e)][_0x5351bb(0xd0)]='none';});}},EditorManager={'initQuill'(){const _0x580d32=_0x2b7817;AppState[_0x580d32(0x14a)]=new Quill('#editor-container',{'modules':{'toolbar':DOM[_0x580d32(0x177)]},'placeholder':_0x580d32(0xa2),'theme':_0x580d32(0xdc)});let _0x3ccae2;AppState[_0x580d32(0x14a)]['on'](_0x580d32(0x183),()=>{clearTimeout(_0x3ccae2),_0x3ccae2=setTimeout(()=>{const _0x4b6bd5=_0x1822,_0x36c7b1=AppState[_0x4b6bd5(0x14a)][_0x4b6bd5(0xe0)]()[_0x4b6bd5(0x8c)](),_0x1ea6db=_0x36c7b1[_0x4b6bd5(0x8d)];if(DOM['messageCharCount']){DOM[_0x4b6bd5(0x92)][_0x4b6bd5(0x134)]=_0x1ea6db;if(_0x1ea6db>0x960)DOM[_0x4b6bd5(0x92)][_0x4b6bd5(0x12e)][_0x4b6bd5(0x8f)]=_0x4b6bd5(0x160);else _0x1ea6db>0x7d0?DOM[_0x4b6bd5(0x92)][_0x4b6bd5(0x12e)][_0x4b6bd5(0x8f)]='#f39c12':DOM[_0x4b6bd5(0x92)][_0x4b6bd5(0x12e)][_0x4b6bd5(0x8f)]='';}if(DOM[_0x4b6bd5(0x170)]){const _0x13ff97=_0x1ea6db>0x9c4,_0x4c4eb0=_0x1ea6db===0x0;DOM['sendButton'][_0x4b6bd5(0x159)]=_0x4c4eb0||_0x13ff97||!AppState[_0x4b6bd5(0xee)];}TypingManager[_0x4b6bd5(0x1a6)](_0x36c7b1);},0x12c);}),AppState[_0x580d32(0x14a)]['keyboard']['addBinding']({'key':_0x580d32(0xb8),'ctrlKey':!![],'shiftKey':![],'altKey':![],'metaKey':![]},()=>{const _0xf013be=_0x580d32;!DOM[_0xf013be(0x170)][_0xf013be(0x159)]&&MessageManager['sendMessage']();}),DOM[_0x580d32(0xe9)]&&DOM[_0x580d32(0xe9)]['addEventListener']('click',function(){const _0x415392=_0x580d32;DOM['editorToolbar'][_0x415392(0x165)][_0x415392(0xc5)](_0x415392(0x140)),DOM[_0x415392(0xb4)]['classList']['toggle'](_0x415392(0x122));const _0x42a6fe=DOM['formatToggle']['querySelector']('i');DOM[_0x415392(0x177)][_0x415392(0x165)][_0x415392(0x19f)](_0x415392(0x140))?(_0x42a6fe[_0x415392(0x165)][_0x415392(0xc1)](_0x415392(0xac)),_0x42a6fe[_0x415392(0x165)]['add']('fa-times')):(_0x42a6fe[_0x415392(0x165)][_0x415392(0xc1)](_0x415392(0x89)),_0x42a6fe['classList'][_0x415392(0x15d)](_0x415392(0xac)));});}},ThemeManager={'initThemeToggle'(){const _0x440017=_0x2b7817;if(!DOM[_0x440017(0x167)])return;const _0x986b0e=window[_0x440017(0x129)](_0x440017(0x97))['matches'],_0x1a3cde=localStorage[_0x440017(0xb2)]('theme');if(!_0x1a3cde&&_0x986b0e)document[_0x440017(0x95)][_0x440017(0x145)]('data-theme',_0x440017(0xfb)),localStorage['setItem'](_0x440017(0xc7),'dark');else _0x1a3cde===_0x440017(0xfb)&&document[_0x440017(0x95)][_0x440017(0x145)](_0x440017(0xda),_0x440017(0xfb));UIManager[_0x440017(0xff)](),DOM[_0x440017(0x167)][_0x440017(0xae)]('click',()=>{const _0x32db7e=_0x440017,_0x220a4c=document[_0x32db7e(0x95)][_0x32db7e(0xdb)](_0x32db7e(0xda));_0x220a4c==='dark'?(document['documentElement'][_0x32db7e(0xea)](_0x32db7e(0xda)),localStorage[_0x32db7e(0x14f)](_0x32db7e(0xc7),_0x32db7e(0xa5))):(document[_0x32db7e(0x95)][_0x32db7e(0x145)](_0x32db7e(0xda),'dark'),localStorage[_0x32db7e(0x14f)](_0x32db7e(0xc7),'dark')),UIManager['applyWallpaper']();}),window[_0x440017(0x129)](_0x440017(0x97))[_0x440017(0xae)](_0x440017(0xbc),_0x3c9dce=>{const _0x3b0088=_0x440017;localStorage[_0x3b0088(0xb2)](_0x3b0088(0xc7))===null&&(_0x3c9dce[_0x3b0088(0x1b0)]?document[_0x3b0088(0x95)][_0x3b0088(0x145)](_0x3b0088(0xda),_0x3b0088(0xfb)):document['documentElement']['removeAttribute'](_0x3b0088(0xda)),UIManager[_0x3b0088(0xff)]());});}},OnlineManager={'updateOnlineUsers':Utils['debounce'](function(){const _0x2ea53c=_0x2b7817;db[_0x2ea53c(0x126)](_0x2ea53c(0x11b))['on'](_0x2ea53c(0x144),_0xeea73f=>{const _0x356395=_0x2ea53c,_0x8639b5=_0xeea73f?_0xeea73f[_0x356395(0x117)]():0x0;DOM[_0x356395(0x91)]&&(DOM['onlineCount']['textContent']=_0x8639b5);});},0x3e8)},ScrollManager={'setupScrollTracking'(){const _0x51188a=_0x2b7817;DOM[_0x51188a(0x9a)]&&DOM[_0x51188a(0x9a)]['addEventListener'](_0x51188a(0x103),()=>{const _0x56c9a9=_0x51188a,{scrollTop:_0x3283e2,scrollHeight:_0x550945,clientHeight:_0x42ab9d}=DOM[_0x56c9a9(0x9a)];AppState[_0x56c9a9(0xb3)]=_0x550945-_0x3283e2-_0x42ab9d<0x32;});}},UsernameManager={'initUsernameInput'(){const _0x37c175=_0x2b7817;if(!DOM[_0x37c175(0x9f)])return;DOM[_0x37c175(0x9f)][_0x37c175(0xae)](_0x37c175(0xde),function(){const _0x5db7f7=_0x37c175,_0x330cf2=this[_0x5db7f7(0x144)][_0x5db7f7(0x8d)];if(DOM[_0x5db7f7(0x16c)]){DOM[_0x5db7f7(0x16c)][_0x5db7f7(0x134)]=_0x330cf2;if(_0x330cf2>0x0&&_0x330cf2<0x3)DOM['usernameCharCount'][_0x5db7f7(0x12e)][_0x5db7f7(0x8f)]=_0x5db7f7(0x160);else _0x330cf2>=0x3&&_0x330cf2<=0x14?DOM[_0x5db7f7(0x16c)][_0x5db7f7(0x12e)][_0x5db7f7(0x8f)]=_0x5db7f7(0x12d):DOM[_0x5db7f7(0x16c)][_0x5db7f7(0x12e)][_0x5db7f7(0x8f)]='';}DOM[_0x5db7f7(0xe2)]&&(DOM[_0x5db7f7(0xe2)][_0x5db7f7(0x159)]=_0x330cf2<0x3||_0x330cf2>0x14);}),DOM[_0x37c175(0x9f)]['addEventListener'](_0x37c175(0x9d),_0x216f38=>{const _0x5bac3d=_0x37c175;_0x216f38[_0x5bac3d(0x163)]===_0x5bac3d(0xb8)&&!DOM[_0x5bac3d(0xe2)]['disabled']&&AuthManager[_0x5bac3d(0x189)]();}),DOM[_0x37c175(0x9f)]['addEventListener']('blur',function(){const _0x546f3a=_0x37c175,_0x1fdedc=this[_0x546f3a(0x144)][_0x546f3a(0x8c)]();_0x1fdedc[_0x546f3a(0x8d)]>0x0&&_0x1fdedc['length']<0x3&&UIManager[_0x546f3a(0x156)](_0x546f3a(0x125),![]);});}},EventManager={'setupEventListeners'(){const _0x1b4d6e=_0x2b7817;DOM[_0x1b4d6e(0xe2)]&&DOM[_0x1b4d6e(0xe2)][_0x1b4d6e(0xae)](_0x1b4d6e(0x108),AuthManager[_0x1b4d6e(0x189)]),DOM[_0x1b4d6e(0x170)]&&DOM[_0x1b4d6e(0x170)]['addEventListener']('click',MessageManager[_0x1b4d6e(0x1af)]),DOM[_0x1b4d6e(0x18e)]&&DOM[_0x1b4d6e(0x18e)][_0x1b4d6e(0xae)](_0x1b4d6e(0x108),MessageManager['loadMessages']),DOM['wallpaperBtn']&&DOM[_0x1b4d6e(0x10d)][_0x1b4d6e(0xae)]('click',()=>UIManager[_0x1b4d6e(0x8e)]()),window[_0x1b4d6e(0xae)](_0x1b4d6e(0xe6),()=>{const _0x257547=_0x1b4d6e;AppState['onlineRef']&&AppState[_0x257547(0x174)][_0x257547(0xc1)](),AppState[_0x257547(0xcb)]&&AppState[_0x257547(0xcb)]['remove']();}),document[_0x1b4d6e(0xae)]('visibilitychange',()=>{const _0x5abe00=_0x1b4d6e;document['hidden']&&AppState['typingRef']&&AppState['isTyping']&&(AppState[_0x5abe00(0xcb)][_0x5abe00(0x98)](![]),AppState[_0x5abe00(0x1a0)]=![]);});}},App={async 'init'(){const _0x2968bf=_0x2b7817;try{EditorManager['initQuill'](),ThemeManager[_0x2968bf(0x194)](),UsernameManager[_0x2968bf(0xc6)](),ScrollManager[_0x2968bf(0xa1)]();const _0x3df2c2=localStorage['getItem'](_0x2968bf(0x132));_0x3df2c2!==null&&(AppState[_0x2968bf(0x187)]=parseInt(_0x3df2c2));UIManager[_0x2968bf(0xff)](),await AuthManager['loadUserRoles']();const _0x465be6=localStorage[_0x2968bf(0xb2)]('username');if(_0x465be6){AppState[_0x2968bf(0xee)]=_0x465be6;DOM[_0x2968bf(0x9f)]&&(DOM[_0x2968bf(0x9f)][_0x2968bf(0x144)]=_0x465be6);DOM[_0x2968bf(0x158)]&&(DOM[_0x2968bf(0x158)][_0x2968bf(0x191)]=_0x465be6+Utils[_0x2968bf(0x1a1)](_0x465be6,AppState['userRoles']));if(DOM[_0x2968bf(0x10a)]){DOM[_0x2968bf(0x10a)][_0x2968bf(0x134)]=_0x465be6[_0x2968bf(0x166)](0x0)[_0x2968bf(0xd1)]();const _0x5e26d5=_0x465be6[_0x2968bf(0x1b2)]('')[_0x2968bf(0x14c)]((_0x428b6a,_0x333a00)=>_0x428b6a+_0x333a00[_0x2968bf(0x99)](0x0),0x0)%0x168;DOM['userAvatar'][_0x2968bf(0x12e)]['backgroundColor']=_0x2968bf(0xe1)+_0x5e26d5+_0x2968bf(0x130);}AuthManager[_0x2968bf(0x90)](),MessageManager['setupMessageListener'](),ReactionManager['setupReactionListener'](),TypingManager[_0x2968bf(0xbe)]();}await auth[_0x2968bf(0xd6)]();const _0xe409d0=auth[_0x2968bf(0xee)];if(!_0xe409d0)throw new Error('Authentication\x20failed');const _0x766649=_0xe409d0[_0x2968bf(0x1aa)];try{const _0xd2991a=await db[_0x2968bf(0x126)]('users_by_uid/'+_0x766649)[_0x2968bf(0xf9)](_0x2968bf(0x144));if(_0xd2991a['exists']()){const _0x8d503d=_0xd2991a['val'](),_0x527662=_0x8d503d[_0x2968bf(0x9f)],_0x5e936b=_0x8d503d[_0x2968bf(0x1ad)]||_0x2968bf(0x115);if(_0x527662&&!AppState['currentUser']){AppState[_0x2968bf(0xee)]=_0x527662,AppState[_0x2968bf(0x196)][_0x527662]=_0x5e936b;DOM[_0x2968bf(0x158)]&&(DOM[_0x2968bf(0x158)][_0x2968bf(0x191)]=_0x527662+Utils[_0x2968bf(0x1a1)](_0x527662,AppState[_0x2968bf(0x196)]));if(DOM['userAvatar']){DOM[_0x2968bf(0x10a)][_0x2968bf(0x134)]=_0x527662['charAt'](0x0)[_0x2968bf(0xd1)]();const _0x56ebc9=_0x527662[_0x2968bf(0x1b2)]('')[_0x2968bf(0x14c)]((_0x309b02,_0x57480c)=>_0x309b02+_0x57480c[_0x2968bf(0x99)](0x0),0x0)%0x168;DOM['userAvatar']['style']['backgroundColor']=_0x2968bf(0xe1)+_0x56ebc9+',\x2070%,\x2065%)';}AuthManager[_0x2968bf(0x90)](),MessageManager[_0x2968bf(0xce)](),ReactionManager[_0x2968bf(0x101)](),TypingManager[_0x2968bf(0xbe)]();}}}catch(_0x2e1052){console[_0x2968bf(0x195)](_0x2968bf(0x100),_0x2e1052);}AppState['currentUser']&&(AppState[_0x2968bf(0x174)]&&(AppState[_0x2968bf(0x174)][_0x2968bf(0xc1)](),AppState[_0x2968bf(0x174)]=null),AppState[_0x2968bf(0x174)]=db['ref'](_0x2968bf(0xdf)+AppState[_0x2968bf(0xee)]),await AppState[_0x2968bf(0x174)]['set'](!![]),AppState[_0x2968bf(0x174)][_0x2968bf(0xfd)]()[_0x2968bf(0xc1)](),AppState[_0x2968bf(0xcb)]&&(AppState[_0x2968bf(0xcb)][_0x2968bf(0xc1)](),AppState[_0x2968bf(0xcb)]=null),AppState[_0x2968bf(0xcb)]=db['ref'](_0x2968bf(0x1b3)+AppState[_0x2968bf(0xee)]),await AppState[_0x2968bf(0xcb)][_0x2968bf(0x98)](![]),AppState[_0x2968bf(0xcb)]['onDisconnect']()['remove']()),OnlineManager[_0x2968bf(0x1a8)](),MessageManager[_0x2968bf(0x111)](),AppState[_0x2968bf(0xa0)]=setInterval(()=>{const _0x547ef0=_0x2968bf;UIManager[_0x547ef0(0x124)]();},0xea60);}catch(_0x49581a){UIManager[_0x2968bf(0x156)](_0x2968bf(0x94)+(_0x49581a[_0x2968bf(0x18c)]||_0x49581a),![]),console[_0x2968bf(0x11e)](_0x2968bf(0x110),_0x49581a);}}};function _0x1822(_0x206c52,_0x1c2001){const _0x7e92fe=_0x7e92();return _0x1822=function(_0x182230,_0x38a269){_0x182230=_0x182230-0x89;let _0x2d12c3=_0x7e92fe[_0x182230];return _0x2d12c3;},_0x1822(_0x206c52,_0x1c2001);}document[_0x2b7817(0xae)]('DOMContentLoaded',()=>{const _0x4f90d8=_0x2b7817;EventManager[_0x4f90d8(0x185)](),App[_0x4f90d8(0x123)]();}),window[_0x2b7817(0x189)]=AuthManager[_0x2b7817(0x189)],window['sendMessage']=MessageManager[_0x2b7817(0x1af)],window[_0x2b7817(0x111)]=MessageManager['loadMessages'],window[_0x2b7817(0x8e)]=()=>UIManager['changeWallpaper']();
